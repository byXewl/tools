import{w as V,o as S,l as p,y as t,q as $,J as D,H as v,I as c,C as m,F as U,D as A,G as z,A as w,B as y,K as E,b as _,r as H,v as g}from"./@vue-CpAqE2Pn.js";import{F as L}from"./file-saver-D_h_-nX0.js";import{_ as M}from"./plugin-vueexport-helper-DlAUqK2U.js";const N={class:"min-h-screen bg-slate-50 relative overflow-hidden font-sans selection:bg-violet-100"},O={class:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 py-10 flex flex-col min-h-screen"},T={class:"text-center mb-10"},W={class:"flex-1 grid lg:grid-cols-12 gap-8 items-start"},X={class:"lg:col-span-4 flex flex-col gap-6 h-full"},Y={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 flex flex-col h-[500px]"},q={class:"flex items-center justify-between mb-4"},G={class:"text-lg font-bold text-slate-800 flex items-center gap-2"},J={class:"flex-1 overflow-y-auto custom-scrollbar space-y-2 pr-1 relative"},K={class:"w-6 h-6 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold shrink-0"},P=["src"],Q={class:"flex-1 min-w-0"},Z={class:"text-xs font-bold text-slate-700 truncate"},tt={class:"text-[10px] text-slate-400"},et={class:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},lt=["onClick","disabled"],ot=["onClick","disabled"],st=["onClick"],at={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6"},it={class:"grid grid-cols-2 gap-4"},nt={class:"flex bg-slate-100 rounded-lg p-1"},rt={class:"flex items-center gap-2 bg-slate-50 border border-slate-200 rounded-lg p-1.5 h-[34px]"},dt={class:"text-xs font-mono text-slate-600"},ct={class:"block text-xs font-bold text-slate-500 mb-1"},ut={class:"block text-xs font-bold text-slate-500 mb-1"},xt={class:"lg:col-span-8 flex flex-col gap-6 h-full"},pt={class:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 flex flex-col h-full min-h-[600px] relative"},gt={class:"flex justify-between items-center mb-4 shrink-0"},bt={class:"text-sm font-bold text-slate-700 flex items-center gap-2"},vt={key:0,class:"w-2 h-2 rounded-full bg-green-500 animate-pulse"},ht=["disabled"],ft={class:"flex-1 bg-slate-200/50 rounded-xl overflow-auto border border-slate-200 flex items-start justify-center p-4 custom-scrollbar relative"},mt={key:0,class:"absolute inset-0 flex items-center justify-center text-slate-400 z-10"},wt={__name:"ImageStitcher",setup(yt){const s=_([]),k=_(null),d=_(null),l=H({direction:"vertical",bgColor:"#ffffff",gap:0,padding:0}),C=()=>k.value.click(),I=async a=>{const e=Array.from(a.target.files);if(e.length){for(const r of e){const o=await F(r);s.value.push(o)}a.target.value="",b()}},F=a=>new Promise(e=>{const r=new FileReader;r.onload=o=>{const i=new Image;i.onload=()=>{e({id:Math.random().toString(36).substr(2,9),raw:a,preview:o.target.result,width:i.width,height:i.height,imgObj:i})},i.src=o.target.result},r.readAsDataURL(a)}),B=a=>{s.value.splice(a,1),b()},j=(a,e)=>{const r=s.value[a];s.value.splice(a,1),s.value.splice(a+e,0,r),b()},b=()=>{if(!d.value)return;const a=d.value.getContext("2d");if(s.value.length===0){d.value.width=0,d.value.height=0;return}let e=0,r=0,o=0,i=0;s.value.forEach(n=>{n.width>o&&(o=n.width),n.height>i&&(i=n.height)}),l.direction==="vertical"?(e=o+l.padding*2,r=s.value.reduce((n,u)=>n+u.height,0)+(s.value.length-1)*l.gap+l.padding*2):(r=i+l.padding*2,e=s.value.reduce((n,u)=>n+u.width,0)+(s.value.length-1)*l.gap+l.padding*2),d.value.width=e,d.value.height=r,a.fillStyle=l.bgColor,a.fillRect(0,0,e,r);let x=l.padding,h=l.padding;s.value.forEach(n=>{let u=x,f=h;l.direction==="vertical"?(u=x+(o-n.width)/2,a.drawImage(n.imgObj,u,f),h+=n.height+l.gap):(f=h+(i-n.height)/2,a.drawImage(n.imgObj,u,f),x+=n.width+l.gap)})},R=()=>{d.value&&d.value.toBlob(a=>{L.saveAs(a,`stitched_image_${Date.now()}.png`)})};return V(l,()=>{b()},{deep:!0}),S(()=>{b()}),(a,e)=>{const r=E("RouterLink");return g(),p("div",N,[e[16]||(e[16]=t("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),e[17]||(e[17]=t("div",{class:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-violet-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),e[18]||(e[18]=t("div",{class:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-fuchsia-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),e[19]||(e[19]=t("div",{class:"absolute top-[30%] left-[40%] w-[400px] h-[400px] bg-pink-200 rounded-full mix-blend-multiply filter blur-[100px] opacity-30 animate-blob animation-delay-4000"},null,-1)),t("div",O,[t("div",T,[$(r,{to:"/",class:"inline-flex items-center gap-1 text-sm font-medium text-slate-500 hover:text-violet-600 mb-4 transition-colors"},{default:D(()=>[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"m15 18-6-6 6-6"})],-1),v(" è¿”å›é¦–é¡µ ",-1)])]),_:1}),e[6]||(e[6]=t("h1",{class:"text-4xl md:text-5xl font-extrabold text-slate-900 mb-4"},[t("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-violet-600 to-fuchsia-600"},"é•¿å›¾æ‹¼æ¥æ‰‹")],-1)),e[7]||(e[7]=t("p",{class:"text-slate-600 max-w-2xl mx-auto"}," å°†å¤šå¼ å›¾ç‰‡æ— ç¼æ‹¼æ¥æˆä¸€å¼ é•¿å›¾ã€‚æ”¯æŒèŠå¤©è®°å½•ã€ç”µå½±å°è¯æ‹¼æ¥ï¼Œçº¯æœ¬åœ°å¤„ç†ã€‚ ",-1))]),t("div",W,[t("div",X,[t("div",Y,[t("div",q,[t("h2",G,[e[8]||(e[8]=t("span",{class:"w-1.5 h-6 bg-violet-500 rounded-full"},null,-1)),v(" å›¾ç‰‡ç´ æ ("+c(s.value.length)+") ",1)]),t("button",{onClick:C,class:"text-xs bg-violet-100 text-violet-700 px-3 py-1.5 rounded-lg font-bold hover:bg-violet-200 transition-colors"}," + æ·»åŠ å›¾ç‰‡ "),t("input",{type:"file",ref_key:"fileInput",ref:k,accept:"image/*",multiple:"",class:"hidden",onChange:I},null,544)]),t("div",J,[s.value.length===0?(g(),p("div",{key:0,class:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50 cursor-pointer hover:border-violet-300 hover:bg-violet-50/50 transition-all",onClick:C},[...e[9]||(e[9]=[t("div",{class:"text-3xl mb-2 opacity-50"}," ğŸ–¼ï¸ ",-1),t("p",{class:"text-sm"}," ç‚¹å‡»æ·»åŠ æˆ–æ‹–æ‹½å›¾ç‰‡ ",-1)])])):m("",!0),(g(!0),p(U,null,A(s.value,(o,i)=>(g(),p("div",{key:o.id,class:"group flex items-center gap-3 bg-white p-2 rounded-xl border border-slate-100 shadow-sm hover:border-violet-200 transition-all"},[t("div",K,c(i+1),1),t("img",{src:o.preview,class:"w-10 h-10 object-cover rounded-lg bg-slate-200"},null,8,P),t("div",Q,[t("div",Z,c(o.raw.name),1),t("div",tt,c(o.width)+" x "+c(o.height),1)]),t("div",et,[t("button",{onClick:x=>j(i,-1),disabled:i===0,class:"w-5 h-5 flex items-center justify-center rounded bg-slate-50 hover:bg-violet-100 text-slate-400 hover:text-violet-600 disabled:opacity-0 text-[10px]"}," â–² ",8,lt),t("button",{onClick:x=>j(i,1),disabled:i===s.value.length-1,class:"w-5 h-5 flex items-center justify-center rounded bg-slate-50 hover:bg-violet-100 text-slate-400 hover:text-violet-600 disabled:opacity-0 text-[10px]"}," â–¼ ",8,ot)]),t("button",{onClick:x=>B(i),class:"p-1.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors"}," âœ• ",8,st)]))),128))])]),t("div",at,[t("div",it,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-xs font-bold text-slate-500 mb-2"},"æ‹¼æ¥æ–¹å‘",-1)),t("div",nt,[t("button",{onClick:e[0]||(e[0]=o=>l.direction="vertical"),class:z(["flex-1 py-1.5 text-xs font-bold rounded-md transition-all",l.direction==="vertical"?"bg-white shadow text-violet-600":"text-slate-500"])}," å‚ç›´ ",2),t("button",{onClick:e[1]||(e[1]=o=>l.direction="horizontal"),class:z(["flex-1 py-1.5 text-xs font-bold rounded-md transition-all",l.direction==="horizontal"?"bg-white shadow text-violet-600":"text-slate-500"])}," æ°´å¹³ ",2)])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-xs font-bold text-slate-500 mb-2"},"èƒŒæ™¯é¢œè‰²",-1)),t("div",rt,[w(t("input",{type:"color","onUpdate:modelValue":e[2]||(e[2]=o=>l.bgColor=o),class:"w-6 h-6 rounded cursor-pointer border-none bg-transparent"},null,512),[[y,l.bgColor]]),t("span",dt,c(l.bgColor),1)])]),t("div",null,[t("label",ct,"å›¾ç‰‡é—´è· ("+c(l.gap)+"px)",1),w(t("input",{type:"range","onUpdate:modelValue":e[3]||(e[3]=o=>l.gap=o),min:"0",max:"100",class:"w-full h-1.5 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-violet-500"},null,512),[[y,l.gap,void 0,{number:!0}]])]),t("div",null,[t("label",ut,"å¤–è¾¹è· ("+c(l.padding)+"px)",1),w(t("input",{type:"range","onUpdate:modelValue":e[4]||(e[4]=o=>l.padding=o),min:"0",max:"100",class:"w-full h-1.5 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-violet-500"},null,512),[[y,l.padding,void 0,{number:!0}]])])])])]),t("div",xt,[t("div",pt,[t("div",gt,[t("div",bt,[s.value.length>0?(g(),p("span",vt)):m("",!0),e[12]||(e[12]=v(" å®æ—¶é¢„è§ˆ ",-1))]),t("button",{onClick:R,disabled:s.value.length===0,class:"px-6 py-2 bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700 text-white font-bold rounded-xl shadow-lg shadow-violet-500/30 flex items-center gap-2 transition-all transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none"},[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),v(" ä¿å­˜é•¿å›¾ ",-1)])],8,ht)]),t("div",ft,[e[14]||(e[14]=t("div",{class:"absolute inset-0 z-0 opacity-30 pointer-events-none",style:{"background-image":"linear-gradient(45deg, #cccccc 25%, transparent 25%), linear-gradient(-45deg, #cccccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #cccccc 75%), linear-gradient(-45deg, transparent 75%, #cccccc 75%)","background-size":"20px 20px"}},null,-1)),s.value.length===0?(g(),p("div",mt," è¯·åœ¨å·¦ä¾§æ·»åŠ å›¾ç‰‡ ")):m("",!0),t("canvas",{ref_key:"canvasRef",ref:d,class:"shadow-2xl relative z-10 max-w-full"},null,512)]),e[15]||(e[15]=t("div",{class:"mt-2 text-center text-xs text-slate-400"}," æç¤ºï¼šè‹¥å›¾ç‰‡å®½åº¦ä¸ä¸€è‡´ï¼Œå°†è‡ªåŠ¨ä»¥æœ€å¤§å®½åº¦ä¸ºåŸºå‡†å±…ä¸­å¯¹é½ ",-1))])])])])])}}},jt=M(wt,[["__scopeId","data-v-b722fe07"]]);export{jt as default};
