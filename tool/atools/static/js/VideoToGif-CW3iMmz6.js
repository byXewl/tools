import{o as K,R as W,l as n,y as t,q as Q,J as X,H as p,O as F,G as Y,I as v,A as w,B,N as R,C as T,F as Z,D as ee,K as te,b as i,r as D,v as r}from"./@vue-CpAqE2Pn.js";import{F as se,t as S,f as le}from"./@ffmpeg-glcX-Wuy.js";import{_ as oe}from"./plugin-vueexport-helper-DlAUqK2U.js";const ae={class:"min-h-screen bg-slate-50 relative overflow-hidden font-sans selection:bg-rose-100"},ne={class:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 py-10 flex flex-col min-h-screen"},re={class:"text-center mb-10"},ie={class:"mt-4 h-6 flex justify-center items-center"},de={key:0,class:"flex items-center gap-2 text-xs text-slate-500 bg-slate-200/50 px-3 py-1 rounded-full animate-pulse"},ue={key:1,class:"flex items-center gap-2 text-xs text-emerald-600 bg-emerald-100 px-3 py-1 rounded-full"},pe={class:"flex-1 grid lg:grid-cols-12 gap-8 items-start"},ce={class:"lg:col-span-7 flex flex-col gap-6"},fe={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 flex flex-col min-h-[500px]"},xe={key:0,class:"flex-1 flex flex-col items-center justify-center"},ve={key:1,class:"space-y-6"},me={class:"relative rounded-xl overflow-hidden bg-black aspect-video shadow-md group"},be=["src"],ge={class:"space-y-2"},he={class:"flex justify-between items-center text-sm font-bold text-slate-700"},we={class:"text-rose-500 font-mono"},ye={class:"flex gap-4 items-center bg-slate-50 p-4 rounded-xl border border-slate-200"},ke={class:"flex-1 flex flex-col gap-1"},_e={class:"flex items-center gap-2"},Fe=["max"],Ce={class:"flex-1 flex flex-col gap-1"},Me={class:"flex items-center gap-2"},Ue=["min","max"],Le={class:"grid grid-cols-2 gap-4"},je={class:"bg-slate-50 p-4 rounded-xl border border-slate-200"},$e={class:"bg-slate-50 p-4 rounded-xl border border-slate-200"},Ve=["disabled"],ze={key:0,class:"flex items-center gap-2"},Be={key:1},Re={class:"lg:col-span-5 flex flex-col gap-6"},Te={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 md:p-8 flex-1 flex flex-col min-h-[300px]"},De={class:"flex-1 flex flex-col gap-4"},Se={key:0,class:"bg-slate-100 rounded-xl overflow-hidden border border-slate-200 flex items-center justify-center p-4"},Ie=["src"],Ne={key:1,class:"flex-1 bg-slate-50 rounded-xl border border-dashed border-slate-200 flex flex-col items-center justify-center text-slate-400 p-8"},Ge=["href"],Oe={class:"mt-6 bg-black/90 rounded-xl p-4 h-32 overflow-y-auto custom-scrollbar font-mono text-xs text-green-400"},Ee={key:0,class:"text-slate-500 italic"},Ae={__name:"VideoToGif",setup(He){const m=i(!1),b=i(!1),y=i(0),a=i([]),g=i(null),c=i(""),d=i(""),C=i(""),I=i(null),M=i(null),h=i(!1),U=i(0),k=i(0),l=D({start:0,end:0}),f=D({width:320,fps:15});let u=null;const N=async()=>{if(!u)try{a.value.push(">> æ­£åœ¨åˆå§‹åŒ– FFmpeg å¼•æ“ (CDN Single Threaded)..."),u=new se,u.on("log",({message:e})=>{e.includes("frame=")||e.includes("size=")||e.includes("fps=")||(a.value.length>50&&a.value.shift(),a.value.push(e))}),u.on("progress",({progress:e})=>{y.value=Math.round(e*100)});const s="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";await u.load({coreURL:await S(`${s}/ffmpeg-core.js`,"text/javascript"),wasmURL:await S(`${s}/ffmpeg-core.wasm`,"application/wasm")}),m.value=!0,a.value.push(">> å¼•æ“åŠ è½½å®Œæˆï¼")}catch(s){console.error(s),a.value.push(`!! åŠ è½½å¤±è´¥: ${s.message}`)}},G=()=>M.value.click(),O=s=>{const e=s.target.files[0];e&&L(e),s.target.value=""},E=s=>{h.value=!1;const e=s.dataTransfer.files[0];e&&L(e)},L=s=>{c.value&&URL.revokeObjectURL(c.value),g.value=s,c.value=URL.createObjectURL(s),d.value=""},A=s=>{U.value=s.target.duration,l.start=0,l.end=s.target.duration},H=s=>{k.value=s.target.currentTime},j=s=>{s==="start"&&(l.start=parseFloat(k.value.toFixed(1))),s==="end"&&(l.end=parseFloat(k.value.toFixed(1)))},P=()=>{c.value="",g.value=null,d.value="",a.value=[]},q=async()=>{if(!(!g.value||!m.value)){b.value=!0,y.value=0,d.value="";try{const s="input.mp4",e="output.gif";a.value.push(">> æ­£åœ¨å†™å…¥æ–‡ä»¶åˆ°å†…å­˜..."),await u.writeFile(s,await le(g.value));const x=l.end-l.start;if(x<=0)throw new Error("ç»“æŸæ—¶é—´å¿…é¡»å¤§äºå¼€å§‹æ—¶é—´");const o=f.width===-1?"":`,scale=${f.width}:-1:flags=lanczos`,_=`fps=${f.fps}${o}`,V=["-ss",l.start.toString(),"-t",x.toString(),"-i",s,"-vf",_,"-f","gif",e];a.value.push(`>> æ‰§è¡Œå‘½ä»¤: ffmpeg ${V.join(" ")}`),await u.exec(V),a.value.push(">> è¯»å–ç”Ÿæˆæ–‡ä»¶...");const J=await u.readFile(e),z=new Blob([J.buffer],{type:"image/gif"});d.value=URL.createObjectURL(z),C.value=(z.size/1024/1024).toFixed(2)+" MB",a.value.push(">> è½¬æ¢æˆåŠŸï¼")}catch(s){console.error(s),a.value.push(`!! é”™è¯¯: ${s.message}`),alert("è½¬æ¢å‡ºé”™ï¼Œè¯·æ£€æŸ¥æ—¥å¿—æˆ–å°è¯•ç¼©çŸ­æ—¶é•¿")}finally{b.value=!1}}},$=s=>{const e=Math.floor(s/60),x=Math.floor(s%60),o=Math.floor(s%1*10);return`${e}:${x.toString().padStart(2,"0")}.${o}`};return K(()=>{N()}),W(()=>{}),(s,e)=>{const x=te("RouterLink");return r(),n("div",ae,[e[27]||(e[27]=t("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),e[28]||(e[28]=t("div",{class:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-rose-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),e[29]||(e[29]=t("div",{class:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-pink-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),e[30]||(e[30]=t("div",{class:"absolute top-[30%] right-[30%] w-[400px] h-[400px] bg-orange-300 rounded-full mix-blend-multiply filter blur-[100px] opacity-30 animate-blob animation-delay-4000"},null,-1)),t("div",ne,[t("div",re,[Q(x,{to:"/",class:"inline-flex items-center gap-1 text-sm font-medium text-slate-500 hover:text-rose-600 mb-4 transition-colors"},{default:X(()=>[...e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"m15 18-6-6 6-6"})],-1),p(" è¿”å›é¦–é¡µ ",-1)])]),_:1}),e[11]||(e[11]=t("h1",{class:"text-4xl md:text-5xl font-extrabold text-slate-900 mb-4"},[t("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-rose-600 to-pink-600"},"è§†é¢‘è½¬ GIF")],-1)),e[12]||(e[12]=t("p",{class:"text-slate-600 max-w-2xl mx-auto"}," åŸºäº FFmpeg.wasm æ ¸å¿ƒï¼Œæµè§ˆå™¨æœ¬åœ°è½¬ç ã€‚æ— éœ€ä¸Šä¼ æœåŠ¡å™¨ï¼Œæ”¯æŒå‰ªè¾‘ã€å¸§ç‡è°ƒæ•´ï¼Œç”Ÿæˆçš„ GIF æåº¦æ¸…æ™°ã€‚ ",-1)),t("div",ie,[m.value?(r(),n("div",ue,[...e[10]||(e[10]=[t("div",{class:"i-tabler-check"},null,-1),p(" å¼•æ“å°±ç»ª (å•çº¿ç¨‹å…¼å®¹æ¨¡å¼) ",-1)])])):(r(),n("div",de,[...e[9]||(e[9]=[t("svg",{class:"animate-spin h-3 w-3",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),p(" æ­£åœ¨åˆå§‹åŒ– FFmpeg å¼•æ“ (çº¦ 30MB)... ",-1)])]))])]),t("div",pe,[t("div",ce,[t("div",fe,[c.value?(r(),n("div",ve,[t("div",me,[(r(),n("video",{ref_key:"videoEl",ref:I,src:c.value,key:c.value,playsinline:"",class:"w-full h-full object-contain",controls:"",onLoadedmetadata:A,onTimeupdate:H},null,40,be)),t("button",{onClick:P,class:"absolute top-2 right-2 bg-black/50 text-white p-2 rounded-lg hover:bg-rose-600 transition-colors z-10",title:"é‡æ–°ä¸Šä¼ "},[...e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 12a9 9 0 1 0 9 -9 9.75 9.75 0 0 0 -6.74 2.74L3 8"}),t("path",{d:"M3 3v5h5"})],-1)])])]),t("div",ge,[t("div",he,[e[15]||(e[15]=t("span",null,"å‰ªè¾‘èŒƒå›´",-1)),t("span",we,v($(l.start))+" - "+v($(l.end))+" ("+v((l.end-l.start).toFixed(1))+"s)",1)]),t("div",ye,[t("div",ke,[e[16]||(e[16]=t("label",{class:"text-xs text-slate-500"},"å¼€å§‹æ—¶é—´ (ç§’)",-1)),t("div",_e,[w(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=o=>l.start=o),min:0,max:l.end,step:"0.1",class:"w-full input-std"},null,8,Fe),[[B,l.start,void 0,{number:!0}]]),t("button",{onClick:e[3]||(e[3]=o=>j("start")),class:"btn-mini"}," å½“å‰ ")])]),e[18]||(e[18]=t("div",{class:"w-px h-10 bg-slate-300"},null,-1)),t("div",Ce,[e[17]||(e[17]=t("label",{class:"text-xs text-slate-500"},"ç»“æŸæ—¶é—´ (ç§’)",-1)),t("div",Me,[w(t("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=o=>l.end=o),min:l.start,max:U.value,step:"0.1",class:"w-full input-std"},null,8,Ue),[[B,l.end,void 0,{number:!0}]]),t("button",{onClick:e[5]||(e[5]=o=>j("end")),class:"btn-mini"}," å½“å‰ ")])])])]),t("div",Le,[t("div",je,[e[20]||(e[20]=t("label",{class:"block text-xs font-bold text-slate-500 mb-2 uppercase"},"ç”»é¢å®½åº¦ (px)",-1)),w(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>f.width=o),class:"w-full bg-white border border-slate-300 text-slate-700 rounded-lg p-2 focus:border-rose-500 focus:outline-none"},[...e[19]||(e[19]=[t("option",{value:240}," 240px (æå°) ",-1),t("option",{value:320}," 320px (è¡¨æƒ…åŒ…) ",-1),t("option",{value:480}," 480px (æ ‡æ¸…) ",-1),t("option",{value:640}," 640px (é«˜æ¸…) ",-1),t("option",{value:-1}," åŸç”»è´¨ (æ…é€‰) ",-1)])],512),[[R,f.width]])]),t("div",$e,[e[22]||(e[22]=t("label",{class:"block text-xs font-bold text-slate-500 mb-2 uppercase"},"å¸§ç‡ (FPS)",-1)),w(t("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>f.fps=o),class:"w-full bg-white border border-slate-300 text-slate-700 rounded-lg p-2 focus:border-rose-500 focus:outline-none"},[...e[21]||(e[21]=[t("option",{value:10}," 10 fps (æµç•…) ",-1),t("option",{value:15}," 15 fps (æ ‡å‡†) ",-1),t("option",{value:24}," 24 fps (ç”µå½±æ„Ÿ) ",-1),t("option",{value:5}," 5 fps (å¡é¡¿/å¤å¤) ",-1)])],512),[[R,f.fps]])])]),t("button",{onClick:q,disabled:b.value||!m.value,class:"w-full py-3.5 bg-gradient-to-r from-rose-600 to-pink-600 hover:from-rose-700 hover:to-pink-700 text-white font-bold rounded-xl shadow-lg shadow-rose-500/30 flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[b.value?(r(),n("span",ze,[e[23]||(e[23]=t("svg",{class:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),p(" å¤„ç†ä¸­... "+v(y.value)+"% ",1)])):(r(),n("span",Be," ğŸš€ å¼€å§‹è½¬æ¢ "))],8,Ve)])):(r(),n("div",xe,[t("div",{class:Y(["w-full h-64 relative group rounded-2xl overflow-hidden bg-slate-50 border-2 border-dashed border-slate-300 flex flex-col items-center justify-center transition-all cursor-pointer",{"border-rose-400 bg-rose-50/30":h.value}]),onDragover:e[0]||(e[0]=F(o=>h.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=F(o=>h.value=!1,["prevent"])),onDrop:F(E,["prevent"]),onClick:G},[...e[13]||(e[13]=[t("div",{class:"text-center p-8"},[t("div",{class:"w-20 h-20 bg-white rounded-full shadow-sm flex items-center justify-center text-4xl mx-auto mb-4 text-slate-300 group-hover:text-rose-500 transition-colors group-hover:scale-110 duration-300"}," ğŸ“¹ "),t("h3",{class:"font-bold text-slate-700 text-lg mb-1"}," ä¸Šä¼ è§†é¢‘ "),t("p",{class:"text-slate-500 text-xs mt-2"},[p(" æ”¯æŒ MP4, WebM, MOV "),t("br"),p(" å»ºè®® < 50MB ")])],-1)])],34),t("input",{type:"file",ref_key:"fileInput",ref:M,accept:"video/*",class:"hidden",onChange:O},null,544)]))])]),t("div",Re,[t("div",Te,[e[26]||(e[26]=t("h2",{class:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-6"},[t("span",{class:"w-1.5 h-6 bg-rose-500 rounded-full"}),p(" è¾“å‡ºç»“æœ ")],-1)),t("div",De,[d.value?(r(),n("div",Se,[t("img",{src:d.value,class:"max-w-full max-h-[400px] shadow-lg rounded-lg"},null,8,Ie)])):(r(),n("div",Ne,[...e[24]||(e[24]=[t("div",{class:"text-4xl mb-2 opacity-30"}," ğŸ–¼ï¸ ",-1),t("p",{class:"text-sm"}," GIF ç”Ÿæˆåå°†åœ¨æ­¤æ˜¾ç¤º ",-1)])])),d.value?(r(),n("a",{key:2,href:d.value,download:"output.gif",class:"w-full py-3 bg-slate-900 hover:bg-slate-800 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-colors shadow-lg"},[e[25]||(e[25]=t("div",{class:"i-tabler-download"},null,-1)),p(" ä¸‹è½½ GIF ("+v(C.value)+") ",1)],8,Ge)):T("",!0)]),t("div",Oe,[a.value.length===0?(r(),n("div",Ee," >> ç­‰å¾…ä»»åŠ¡å¼€å§‹... ")):T("",!0),(r(!0),n(Z,null,ee(a.value,(o,_)=>(r(),n("div",{key:_,class:"mb-1 whitespace-pre-wrap font-sans break-all"},v(o),1))),128))])])])])])])}}},Ke=oe(Ae,[["__scopeId","data-v-1e33c835"]]);export{Ke as default};
