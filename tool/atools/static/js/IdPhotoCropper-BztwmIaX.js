import{R as _,l as n,y as t,q as j,J as M,z as c,H as d,C as h,F as R,D as B,I as m,A as L,P,b as p,K as D,n as I,v as i,G as U}from"./@vue-CpAqE2Pn.js";import{C as S}from"./cropperjs-DzN83UJW.js";import{F as N}from"./file-saver-D_h_-nX0.js";import{_ as V}from"./plugin-vueexport-helper-DlAUqK2U.js";const $={class:"min-h-screen bg-slate-50 relative overflow-hidden font-sans selection:bg-teal-100"},F={class:"relative z-10 max-w-6xl mx-auto px-4 sm:px-6 py-10"},A={class:"flex flex-col items-center mb-10 text-center"},G={class:"grid lg:grid-cols-12 gap-8"},O={class:"lg:col-span-8"},E={class:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 min-h-[500px] flex flex-col h-full transition-all"},J={key:0,class:"flex-1 flex flex-col items-center justify-center border-2 border-dashed border-slate-200 rounded-2xl bg-slate-50/50 hover:bg-slate-100/50 transition-colors p-10"},H={class:"cursor-pointer px-6 py-3 bg-teal-600 hover:bg-teal-700 text-white font-bold rounded-xl shadow-lg shadow-teal-500/30 transition-all transform hover:-translate-y-0.5 active:scale-95"},T={key:1,class:"relative flex-1 bg-slate-900 rounded-xl overflow-hidden flex items-center justify-center shadow-inner"},q=["src"],z={key:2,class:"mt-4 flex justify-between items-center"},K={class:"flex gap-2"},Q={class:"lg:col-span-4 space-y-6"},W={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6"},X={class:"grid grid-cols-2 gap-3"},Y=["onClick"],Z={class:"font-bold text-slate-800 text-sm"},tt={class:"text-xs text-slate-500 mt-1"},et={class:"text-[10px] text-slate-400 mt-0.5"},ot={key:0,class:"absolute top-2 right-2 text-teal-500"},lt={class:"mt-4 pt-4 border-t border-slate-100 text-xs text-slate-500 flex justify-between"},st={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6"},at={class:"flex items-center justify-between mb-6"},rt={class:"flex items-center gap-2"},nt={key:0,class:"text-xs text-slate-400"},it=["disabled"],dt={__name:"IdPhotoCropper",setup(ut){const v=[{name:"一寸 (1寸)",mm:"25mm × 35mm",width:295,height:413,desc:"驾照 / 简历 / 证件"},{name:"小二寸 (护照)",mm:"33mm × 48mm",width:390,height:567,desc:"中国护照 / 签证"},{name:"二寸 (2寸)",mm:"35mm × 49mm",width:413,height:579,desc:"标准二寸照片"},{name:"大一寸",mm:"33mm × 48mm",width:390,height:567,desc:"部分职业资格证"},{name:"五寸 (生活照)",mm:"89mm × 127mm",width:1051,height:1500,desc:"普通相纸打印"}],a=p(v[0]),r=p(null),x=p(null),u=p(!0);let o=null;const b=s=>{const e=s.target.files[0];e&&(r.value&&URL.revokeObjectURL(r.value),r.value=URL.createObjectURL(e),I(()=>{f()}))},f=()=>{o&&o.destroy(),x.value&&(o=new S(x.value,{aspectRatio:a.value.width/a.value.height,viewMode:1,dragMode:"move",autoCropArea:.8,restore:!1,guides:!0,center:!0,highlight:!1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1,background:!1}))},w=s=>{a.value=s,o&&o.setAspectRatio(s.width/s.height)},g=s=>{o&&o.rotate(s)},k=()=>{o&&o.reset()},y=()=>{if(!o)return;const s=o.getCroppedCanvas({width:a.value.width,height:a.value.height,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:u.value?"#ffffff":"transparent"});s&&s.toBlob(e=>{N.saveAs(e,`ID_Photo_${a.value.name}_${Date.now()}.jpg`)},u.value?"image/jpeg":"image/png",.95)};return _(()=>{o&&o.destroy(),r.value&&URL.revokeObjectURL(r.value)}),(s,e)=>{const C=D("RouterLink");return i(),n("div",$,[e[19]||(e[19]=t("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#ccfbf1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),e[20]||(e[20]=t("div",{class:"absolute top-0 right-[-10%] w-[500px] h-[500px] bg-teal-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),e[21]||(e[21]=t("div",{class:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),t("div",F,[t("div",A,[j(C,{to:"/",class:"text-sm font-medium text-slate-500 hover:text-teal-600 mb-4 inline-flex items-center gap-1 transition-colors"},{default:M(()=>[...e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"m15 18-6-6 6-6"})],-1),d(" 返回首页 ",-1)])]),_:1}),e[5]||(e[5]=t("h1",{class:"text-3xl md:text-4xl font-extrabold text-slate-900 mb-3"},[t("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-teal-600 to-emerald-500"},"智能证件照裁剪")],-1)),e[6]||(e[6]=t("p",{class:"text-slate-600"}," 标准尺寸模板，保持比例锁定。生成 300DPI 高清打印级证件照。 ",-1))]),t("div",G,[t("div",O,[t("div",E,[r.value?(i(),n("div",T,[t("img",{ref_key:"imageRef",ref:x,src:r.value,class:"max-w-full max-h-full block",alt:"Source Image"},null,8,q)])):(i(),n("div",J,[e[8]||(e[8]=c('<div class="w-20 h-20 bg-teal-100 text-teal-500 rounded-full flex items-center justify-center mb-4 shadow-inner" data-v-881082b2><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-881082b2><rect x="3" y="3" width="18" height="18" rx="2" ry="2" data-v-881082b2></rect><circle cx="8.5" cy="8.5" r="1.5" data-v-881082b2></circle><polyline points="21 15 16 10 5 21" data-v-881082b2></polyline></svg></div><h3 class="text-lg font-bold text-slate-700 mb-2" data-v-881082b2> 上传生活照 </h3><p class="text-sm text-slate-500 mb-6 text-center max-w-xs" data-v-881082b2> 支持 JPG/PNG。建议使用背景干净、光线充足的正面照片。 </p>',3)),t("label",H,[e[7]||(e[7]=d(" 选择照片 ",-1)),t("input",{type:"file",class:"hidden",accept:"image/*",onChange:b},null,32)])])),r.value?(i(),n("div",z,[t("div",K,[t("button",{onClick:e[0]||(e[0]=l=>g(-90)),class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg tooltip",title:"向左旋转"},[...e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),t("path",{d:"M3 3v5h5"})],-1)])]),t("button",{onClick:e[1]||(e[1]=l=>g(90)),class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg tooltip",title:"向右旋转"},[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 12a9 9 0 1 1-9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),t("path",{d:"M21 3v5h-5"})],-1)])]),t("button",{onClick:k,class:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg tooltip",title:"重置裁剪框"},[...e[11]||(e[11]=[c('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-881082b2><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" data-v-881082b2></path><path d="M3 3v5h5" data-v-881082b2></path><path d="M21 12a9 9 0 1 1-9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-881082b2></path><path d="M21 3v5h-5" data-v-881082b2></path></svg>',1)])])]),t("button",{onClick:e[2]||(e[2]=l=>r.value=null),class:"text-sm text-red-500 hover:text-red-600 hover:underline"}," 重新上传 ")])):h("",!0)])]),t("div",Q,[t("div",W,[e[14]||(e[14]=t("h2",{class:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2"},[t("span",{class:"w-1 h-6 bg-teal-500 rounded-full"}),d(" 尺寸模板 ")],-1)),t("div",X,[(i(),n(R,null,B(v,l=>t("button",{key:l.name,onClick:mt=>w(l),class:U(["relative p-3 rounded-xl text-left border transition-all hover:shadow-md",a.value.name===l.name?"bg-teal-50 border-teal-500 ring-1 ring-teal-500":"bg-white border-slate-200 hover:border-teal-300"])},[t("div",Z,m(l.name),1),t("div",tt,m(l.mm),1),t("div",et,m(l.desc),1),a.value.name===l.name?(i(),n("div",ot,[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"20 6 9 17 4 12"})],-1)])])):h("",!0)],10,Y)),64))]),t("div",lt,[e[13]||(e[13]=t("span",null,"打印分辨率: 300 DPI",-1)),t("span",null,"输出尺寸: "+m(a.value.width)+" x "+m(a.value.height)+" px",1)])]),t("div",st,[e[17]||(e[17]=t("h2",{class:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2"},[t("span",{class:"w-1 h-6 bg-emerald-500 rounded-full"}),d(" 导出预览 ")],-1)),t("div",at,[e[15]||(e[15]=t("label",{class:"text-sm text-slate-700 font-medium"},"自动填充白底",-1)),t("div",rt,[u.value?(i(),n("span",nt,"适用于JPG")):h("",!0),L(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>u.value=l),class:"accent-teal-600 w-5 h-5 cursor-pointer"},null,512),[[P,u.value]])])]),t("button",{onClick:y,disabled:!r.value,class:"w-full py-3.5 bg-gradient-to-r from-teal-600 to-emerald-500 text-white font-bold rounded-xl shadow-lg shadow-teal-500/30 hover:shadow-teal-500/50 transition-all transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2"},[...e[16]||(e[16]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),d(" 下载证件照 ",-1)])],8,it)]),e[18]||(e[18]=t("div",{class:"bg-amber-50/80 backdrop-blur rounded-2xl p-4 border border-amber-100 text-xs text-amber-800 leading-relaxed"},[t("strong",null,"⚠️ 注意事项："),t("br"),d(" 此工具仅进行裁剪。如果您的原图背景杂乱，请先使用专门的工具去除背景，或确保原图就是在白墙前拍摄的。 ")],-1))])])])])}}},gt=V(dt,[["__scopeId","data-v-881082b2"]]);export{gt as default};
