import{_ as R}from"./plugin-vueexport-helper-DlAUqK2U.js";import{o as N,R as I,l,y as t,q as V,J as D,I as r,C as w,G as $,H as p,z as E,F,D as O,b as d,K as H,v as n}from"./@vue-CpAqE2Pn.js";const J={class:"min-h-screen bg-slate-50 relative overflow-hidden font-sans selection:bg-teal-100"},P={class:"relative z-10 max-w-6xl mx-auto px-6 py-12"},q={class:"flex flex-col items-center mb-10 text-center"},G={class:"max-w-3xl mx-auto mb-10"},K={class:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/50 p-2 md:p-3 flex flex-col md:flex-row items-center gap-3"},U={class:"flex-1 w-full flex items-center bg-slate-100/50 rounded-xl px-4 py-3 border border-slate-200 relative group transition-colors hover:border-teal-300 hover:bg-white"},Q={key:0,class:"text-slate-400 text-sm animate-pulse"},W={key:1,class:"text-lg font-mono text-slate-800 font-bold truncate select-all"},X={key:0,class:"text-xs font-bold text-teal-600"},Y={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Z={class:"flex gap-2 w-full md:w-auto"},tt=["disabled"],et={key:0,class:"text-xs bg-slate-100 px-1.5 rounded text-slate-400"},st=["disabled"],ot={class:"grid lg:grid-cols-12 gap-6 h-[600px]"},at={class:"lg:col-span-4 flex flex-col bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 overflow-hidden"},lt={class:"p-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center"},nt={class:"text-xs bg-teal-100 text-teal-700 px-2 py-0.5 rounded-full"},rt={class:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-2"},it={key:0,class:"h-full flex flex-col items-center justify-center text-slate-400 space-y-3 opacity-60"},dt=["onClick"],ct={class:"flex justify-between items-start mb-1"},ut=["title"],ht={class:"text-xs text-slate-400 font-mono whitespace-nowrap"},xt={class:"text-sm text-slate-600 font-medium truncate mb-1"},pt={class:"text-xs text-slate-400 truncate"},vt={class:"lg:col-span-8 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 flex flex-col overflow-hidden relative"},mt={key:0,class:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 z-0"},ft={key:1,class:"flex flex-col h-full relative z-10"},bt={class:"p-6 border-b border-slate-100 bg-white/50"},wt={class:"text-xl font-bold text-slate-800 mb-2"},gt={class:"flex items-center justify-between text-sm"},_t={class:"flex items-center gap-2"},yt={class:"w-8 h-8 rounded-full bg-gradient-to-br from-teal-400 to-emerald-500 flex items-center justify-center text-white font-bold text-xs uppercase"},kt={class:"text-slate-900 font-medium"},jt={class:"text-slate-500 text-xs"},Ct={class:"text-slate-400 font-mono text-xs"},Mt={class:"flex-1 bg-white relative"},$t=["srcdoc"],Bt={key:0,class:"p-2 bg-slate-50 border-t border-slate-200 text-xs text-slate-500 px-4"},v="https://api.mail.tm",St={__name:"TempMail",setup(Tt){const u=d(""),B=d(""),c=d(""),h=d([]),g=d(null),s=d(null),m=d(!1),f=d(!1),_=d(!1),x=d(10);let y=null;const j=(o=8)=>{const e="abcdefghijklmnopqrstuvwxyz0123456789";let i="";for(let a=0;a<o;a++)i+=e.charAt(Math.floor(Math.random()*e.length));return i},S=o=>{const e=new Date(o);return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},T=async()=>(await(await fetch(`${v}/domains`)).json())["hydra:member"],C=async()=>{m.value=!0,c.value="",h.value=[],s.value=null,g.value=null;try{const o=await T();if(!o||o.length===0)throw new Error("No domains available");const e=o[0].domain,i=j(10),a=j(12),b=`${i}@${e}`;if(!(await fetch(`${v}/accounts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:b,password:a})})).ok)throw new Error("Registration failed");const L=await(await fetch(`${v}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:b,password:a})})).json();u.value=b,B.value=a,c.value=L.token,k()}catch(o){console.error("Account init failed:",o),alert("邮箱服务连接失败，请检查网络 (Mail.tm)")}finally{m.value=!1,M()}},k=async()=>{if(c.value){f.value=!0;try{const i=(await(await fetch(`${v}/messages?page=1`,{headers:{Authorization:`Bearer ${c.value}`}})).json())["hydra:member"]||[];i.length>0&&(h.value=i)}catch(o){console.error("Fetch mail failed:",o)}finally{f.value=!1,M()}}},z=async o=>{if(c.value){g.value=o;try{const i=await(await fetch(`${v}/messages/${o}`,{headers:{Authorization:`Bearer ${c.value}`}})).json();s.value=i}catch(e){console.error("Fetch content failed:",e)}}},A=()=>{navigator.clipboard.writeText(u.value),_.value=!0,setTimeout(()=>_.value=!1,2e3)},M=()=>{x.value=15};return N(()=>{C(),y=setInterval(()=>{c.value&&(x.value--,x.value<=0&&k())},1e3)}),I(()=>{y&&clearInterval(y)}),(o,e)=>{const i=H("RouterLink");return n(),l("div",J,[e[12]||(e[12]=t("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),e[13]||(e[13]=t("div",{class:"absolute top-0 right-[-10%] w-[500px] h-[500px] bg-teal-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),e[14]||(e[14]=t("div",{class:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),t("div",P,[t("div",q,[V(i,{to:"/",class:"text-sm font-medium text-slate-500 hover:text-teal-600 mb-4 inline-flex items-center gap-1 transition-colors"},{default:D(()=>[...e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"m15 18-6-6 6-6"})],-1),p(" 返回首页 ",-1)])]),_:1}),e[1]||(e[1]=t("h1",{class:"text-3xl md:text-4xl font-extrabold text-slate-900 mb-3"},[t("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-teal-500 to-emerald-600"},"临时隐私邮箱")],-1)),e[2]||(e[2]=t("p",{class:"text-slate-600 max-w-2xl"}," 免费的一次性邮箱，用于注册临时账号、接收验证码。用完即走，拒绝垃圾邮件骚扰。 ",-1))]),t("div",G,[t("div",K,[t("div",U,[e[4]||(e[4]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-slate-400 mr-3 group-hover:text-teal-500 transition-colors",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),t("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1)),m.value?(n(),l("span",Q,"正在初始化账号...")):(n(),l("span",W,r(u.value),1)),u.value?(n(),l("button",{key:2,onClick:A,class:"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-lg text-slate-400 hover:text-teal-600 hover:bg-teal-50 transition-all",title:"复制地址"},[_.value?(n(),l("span",X,"已复制!")):(n(),l("svg",Y,[...e[3]||(e[3]=[t("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"},null,-1),t("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"},null,-1)])]))])):w("",!0)]),t("div",Z,[t("button",{onClick:k,disabled:!c.value||f.value,class:"flex-1 md:flex-none px-6 py-3 bg-white border border-slate-200 hover:border-teal-300 hover:text-teal-600 text-slate-600 font-medium rounded-xl transition-all flex items-center justify-center gap-2 shadow-sm disabled:opacity-50"},[(n(),l("svg",{class:$({"animate-spin":f.value}),xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...e[5]||(e[5]=[t("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},null,-1),t("path",{d:"M3 3v5h5"},null,-1),t("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"},null,-1),t("path",{d:"M16 16h5v5"},null,-1)])],2)),e[6]||(e[6]=p(" 刷新 ",-1)),x.value>0&&c.value?(n(),l("span",et,r(x.value)+"s",1)):w("",!0)],8,tt),t("button",{onClick:C,disabled:m.value,class:"flex-1 md:flex-none px-6 py-3 bg-gradient-to-r from-teal-500 to-emerald-600 text-white font-bold rounded-xl shadow-lg shadow-teal-500/30 hover:shadow-teal-500/50 transition-all transform hover:-translate-y-0.5 flex items-center justify-center gap-2 disabled:opacity-50"},[...e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})],-1),p(" 更换 ",-1)])],8,st)])])]),t("div",ot,[t("div",at,[t("div",lt,[e[8]||(e[8]=t("h3",{class:"font-bold text-slate-700"}," 收件箱 ",-1)),t("span",nt,r(h.value.length)+" 封",1)]),t("div",rt,[h.value.length===0?(n(),l("div",it,[...e[9]||(e[9]=[E('<div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center" data-v-6b016c81><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-6b016c81><path d="M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9" data-v-6b016c81></path><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" data-v-6b016c81></path><path d="M19 16v6" data-v-6b016c81></path><path d="M16 19h6" data-v-6b016c81></path></svg></div><p class="text-sm" data-v-6b016c81> 暂无新邮件，等待中... </p>',2)])])):w("",!0),(n(!0),l(F,null,O(h.value,a=>(n(),l("div",{key:a.id,onClick:b=>z(a.id),class:$(["cursor-pointer p-3 rounded-xl transition-all border",g.value===a.id?"bg-white border-teal-200 shadow-md ring-1 ring-teal-100":"bg-transparent border-transparent hover:bg-white hover:shadow-sm hover:border-slate-100"])},[t("div",ct,[t("span",{class:"font-bold text-slate-800 text-sm truncate w-2/3",title:a.from.address},r(a.from.name||a.from.address),9,ut),t("span",ht,r(S(a.createdAt)),1)]),t("div",xt,r(a.subject||"(无主题)"),1),t("div",pt,r(a.intro),1)],10,dt))),128))])]),t("div",vt,[s.value?(n(),l("div",ft,[t("div",bt,[t("h2",wt,r(s.value.subject),1),t("div",gt,[t("div",_t,[t("div",yt,r((s.value.from.name||s.value.from.address)[0]),1),t("div",null,[t("p",kt,r(s.value.from.name?`${s.value.from.name} <${s.value.from.address}>`:s.value.from.address),1),t("p",jt," 发送给 <"+r(u.value)+"> ",1)])]),t("div",Ct,r(new Date(s.value.createdAt).toLocaleString()),1)])]),t("div",Mt,[t("iframe",{srcdoc:s.value.html?s.value.html[0]:s.value.text||"无内容",class:"w-full h-full border-none",sandbox:"allow-popups allow-popups-to-escape-sandbox allow-same-origin"},null,8,$t)]),s.value.attachments&&s.value.attachments.length>0?(n(),l("div",Bt," 包含 "+r(s.value.attachments.length)+" 个附件 (暂不支持直接下载) ",1)):w("",!0)])):(n(),l("div",mt,[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",class:"mb-4 opacity-20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),t("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),t("p",null,"点击邮件查看详情",-1)])]))])]),e[11]||(e[11]=t("div",{class:"mt-8 text-center text-sm text-slate-400"},[t("p",null,[p("数据服务由 "),t("a",{href:"https://mail.tm/",target:"_blank",class:"hover:text-teal-600 underline"},"Mail.tm"),p(" 提供。页面关闭后账号自动失效。")])],-1))])])}}},Nt=R(St,[["__scopeId","data-v-6b016c81"]]);export{Nt as default};
