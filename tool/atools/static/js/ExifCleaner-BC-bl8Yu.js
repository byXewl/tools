import{l,y as e,q as $,J as z,O as _,G as J,C as k,H as m,I as C,F as V,D as L,K as R,b as x,v as o}from"./@vue-CpAqE2Pn.js";import{p as E}from"./piexifjs-CgIK6tOc.js";import{F as D}from"./file-saver-D_h_-nX0.js";import{_ as T}from"./plugin-vueexport-helper-DlAUqK2U.js";const X={class:"min-h-screen bg-slate-50 relative overflow-hidden font-sans selection:bg-emerald-100"},O={class:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 py-10 flex flex-col min-h-screen"},H={class:"text-center mb-10"},M={class:"flex-1 grid lg:grid-cols-12 gap-8 items-start"},q={class:"lg:col-span-5 flex flex-col gap-6"},K={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 flex flex-col items-center"},Q=["src"],W={key:2,class:"absolute top-4 right-4 z-10"},Y={key:0,class:"w-full mt-6 bg-emerald-50 border border-emerald-100 rounded-xl p-4 flex items-start gap-3"},Z={key:0,class:"text-xs text-emerald-600 mt-1"},ee={class:"font-bold"},te={key:1,class:"text-xs text-emerald-600 mt-1"},se={class:"lg:col-span-7 flex flex-col gap-6"},le={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 md:p-8 flex-1 flex flex-col min-h-[400px]"},oe={class:"flex items-center justify-between mb-6"},ae={key:0,class:"text-xs bg-red-50 text-red-600 px-2 py-1 rounded border border-red-100 font-medium flex items-center gap-1"},re={class:"flex-1 bg-slate-50 rounded-2xl border border-slate-200 overflow-hidden relative"},ne={key:0,class:"absolute inset-0 flex flex-col items-center justify-center text-slate-400"},ie={key:1,class:"absolute inset-0 flex flex-col items-center justify-center text-slate-400"},de={key:2,class:"h-full overflow-y-auto custom-scrollbar p-2"},xe={class:"w-full text-sm text-left"},ue={class:"divide-y divide-slate-200"},ce={class:"px-4 py-3 font-medium text-slate-600 w-1/3"},pe={class:"px-4 py-3 text-slate-500 font-mono break-all"},me={class:"mt-6 flex justify-end gap-3"},fe=["disabled"],be=["disabled"],ge={__name:"ExifCleaner",setup(ve){const a=x(""),j=x(null),f=x(!1),u=x([]),g=x(!1),v=x(!1);let c=null;const F=()=>j.value.click(),I=s=>{G(s.target.files[0]),s.target.value=""},P=s=>{f.value=!1,G(s.dataTransfer.files[0])},G=s=>{if(!s)return;if(!s.type.match("image/jpeg")){alert("EXIF ç¼–è¾‘ç›®å‰ä»…æ”¯æŒ JPG/JPEG æ ¼å¼å›¾ç‰‡");return}c=s;const t=new FileReader;t.onload=i=>{var d;const n=i.target.result;a.value=n;try{const r=E.load(n),h=[];let A=!1;const b={"0th":r["0th"],Exif:r.Exif,GPS:r.GPS};for(const p in b)if(b[p])for(const y in b[p]){const w=b[p][y],U=((d=E.TAGS[p][y])==null?void 0:d.name)||y;typeof w=="string"&&w.length>50||(h.push({name:U,value:S(w)}),p==="GPS"&&(A=!0))}u.value=h,g.value=A,v.value=h.length>0}catch(r){console.log("No EXIF data found or parse error",r),u.value=[],g.value=!1,v.value=!1}},t.readAsDataURL(s)},S=s=>Array.isArray(s)?s.length===2&&typeof s[0]=="number"&&s[1]>1?`${s[0]}/${s[1]}`:`Array(${s.length})`:s,B=()=>{if(a.value)try{const s=E.remove(a.value),t=atob(s.split(",")[1]),i=new ArrayBuffer(t.length),n=new Uint8Array(i);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);const d=new Blob([i],{type:"image/jpeg"});D.saveAs(d,`clean_${c.name}`)}catch(s){alert("æ¸…é™¤å¤±è´¥ï¼Œå›¾ç‰‡æ ¼å¼å¯èƒ½ä¸å…¼å®¹"),console.error(s)}},N=()=>{c&&D.saveAs(c,c.name)};return(s,t)=>{const i=R("RouterLink");return o(),l("div",X,[t[15]||(t[15]=e("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),t[16]||(t[16]=e("div",{class:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),t[17]||(t[17]=e("div",{class:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-cyan-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),t[18]||(t[18]=e("div",{class:"absolute top-[30%] right-[30%] w-[400px] h-[400px] bg-teal-300 rounded-full mix-blend-multiply filter blur-[100px] opacity-30 animate-blob animation-delay-4000"},null,-1)),e("div",O,[e("div",H,[$(i,{to:"/",class:"inline-flex items-center gap-1 text-sm font-medium text-slate-500 hover:text-emerald-600 mb-4 transition-colors"},{default:z(()=>[...t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m15 18-6-6 6-6"})],-1),m(" è¿”å›é¦–é¡µ ",-1)])]),_:1}),t[3]||(t[3]=e("h1",{class:"text-4xl md:text-5xl font-extrabold text-slate-900 mb-4"},[e("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-cyan-600"},"ç…§ç‰‡éšç§æŠ¹é™¤")],-1)),t[4]||(t[4]=e("p",{class:"text-slate-600 max-w-2xl mx-auto"}," ä¸€é”®æŸ¥çœ‹å¹¶ç§»é™¤ç…§ç‰‡ä¸­çš„ GPS ä½ç½®ã€æ‹æ‘„è®¾å¤‡ã€æ—¶é—´ç­‰æ•æ„Ÿå…ƒæ•°æ® (EXIF)ã€‚ ",-1))]),e("div",M,[e("div",q,[e("div",K,[e("div",{class:J(["w-full relative group rounded-2xl overflow-hidden bg-slate-100 border-2 border-dashed border-slate-300 min-h-[300px] flex items-center justify-center transition-all",{"border-emerald-400 bg-emerald-50":f.value}]),onDragover:t[0]||(t[0]=_(n=>f.value=!0,["prevent"])),onDragleave:t[1]||(t[1]=_(n=>f.value=!1,["prevent"])),onDrop:_(P,["prevent"])},[a.value?(o(),l("img",{key:1,src:a.value,class:"max-w-full max-h-[500px] object-contain shadow-sm"},null,8,Q)):(o(),l("div",{key:0,class:"text-center p-8 cursor-pointer",onClick:F},[...t[5]||(t[5]=[e("div",{class:"w-20 h-20 bg-white rounded-full shadow-sm flex items-center justify-center text-4xl mx-auto mb-4 text-slate-300 group-hover:text-emerald-500 transition-colors"}," ğŸ“¸ ",-1),e("h3",{class:"font-bold text-slate-700 text-lg mb-1"}," ç‚¹å‡»æˆ–æ‹–æ‹½ç…§ç‰‡ ",-1),e("p",{class:"text-slate-500 text-sm"}," æ”¯æŒ JPG/JPEG æ ¼å¼ ",-1)])])),a.value?(o(),l("div",W,[e("button",{onClick:F,class:"bg-white/90 backdrop-blur text-slate-700 px-3 py-1.5 rounded-lg text-sm font-bold shadow-sm hover:text-emerald-600 transition-colors"}," æ›´æ¢å›¾ç‰‡ ")])):k("",!0)],34),e("input",{type:"file",ref_key:"fileInput",ref:j,accept:"image/jpeg, image/jpg",class:"hidden",onChange:I},null,544),a.value?(o(),l("div",Y,[t[9]||(t[9]=e("div",{class:"text-2xl"}," ğŸ›¡ï¸ ",-1)),e("div",null,[t[8]||(t[8]=e("h4",{class:"font-bold text-emerald-800 text-sm"}," éšç§åˆ†æå®Œæˆ ",-1)),v.value?(o(),l("p",Z,[t[6]||(t[6]=m(" æ£€æµ‹åˆ°è¯¥å›¾ç‰‡åŒ…å« ",-1)),e("span",ee,C(u.value.length),1),t[7]||(t[7]=m(" é¡¹å…ƒæ•°æ®ï¼Œå»ºè®®æ¸…é™¤ã€‚ ",-1))])):(o(),l("p",te," æœªæ£€æµ‹åˆ° EXIF æ•°æ®ï¼Œè¯¥å›¾ç‰‡æ˜¯å®‰å…¨çš„ã€‚ "))])])):k("",!0)])]),e("div",se,[e("div",le,[e("div",oe,[t[10]||(t[10]=e("h2",{class:"text-lg font-bold text-slate-800 flex items-center gap-2"},[e("span",{class:"w-1.5 h-6 bg-cyan-500 rounded-full"}),m(" å…ƒæ•°æ®è¯¦æƒ… ")],-1)),g.value?(o(),l("div",ae," ğŸ“ åŒ…å« GPS å®šä½ ")):k("",!0)]),e("div",re,[a.value?u.value.length===0?(o(),l("div",ie,[...t[12]||(t[12]=[e("div",{class:"text-3xl mb-2 opacity-30"}," ğŸƒ ",-1),e("p",{class:"text-sm"}," å¾ˆå¹²å‡€ï¼Œæ²¡æœ‰å‘ç°æ•æ„Ÿä¿¡æ¯ ",-1)])])):(o(),l("div",de,[e("table",xe,[t[13]||(t[13]=e("thead",{class:"text-xs text-slate-500 uppercase bg-slate-100 sticky top-0"},[e("tr",null,[e("th",{class:"px-4 py-3 rounded-l-lg"}," å±æ€§å "),e("th",{class:"px-4 py-3 rounded-r-lg"}," å€¼ ")])],-1)),e("tbody",ue,[(o(!0),l(V,null,L(u.value,(n,d)=>(o(),l("tr",{key:d,class:"hover:bg-white transition-colors"},[e("td",ce,C(n.name),1),e("td",pe,C(n.value),1)]))),128))])])])):(o(),l("div",ne,[...t[11]||(t[11]=[e("div",{class:"text-3xl mb-2 opacity-30"}," ğŸ“Š ",-1),e("p",{class:"text-sm"}," è¯·å…ˆä¸Šä¼ å›¾ç‰‡ä»¥åˆ†ææ•°æ® ",-1)])]))]),e("div",me,[e("button",{onClick:N,disabled:!a.value,class:"px-5 py-2.5 bg-white border border-slate-200 text-slate-600 font-bold rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"}," ä¸‹è½½åŸå›¾ ",8,fe),e("button",{onClick:B,disabled:!a.value,class:"px-6 py-2.5 bg-gradient-to-r from-emerald-500 to-cyan-600 hover:from-emerald-600 hover:to-cyan-700 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/30 flex items-center gap-2 transition-all transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none"},[...t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),m(" æŠ¹é™¤éšç§å¹¶ä¿å­˜ ",-1)])],8,be)])])])])])])}}},ke=T(ge,[["__scopeId","data-v-2950fea6"]]);export{ke as default};
