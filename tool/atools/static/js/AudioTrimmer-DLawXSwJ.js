import{R as K,l as i,y as e,q as A,J as Z,I as d,C as B,H as j,A as z,B as L,F as U,D,K as Q,b as r,v as u,G as X,n as Y}from"./@vue-CpAqE2Pn.js";import{_ as ee}from"./FileUploader-DU1r4fqN.js";import{F as te}from"./file-saver-D_h_-nX0.js";import{w as se,d as oe}from"./wavesurfer.js-DeNN4-33.js";import{F as le,f as ae,t as T}from"./@ffmpeg-glcX-Wuy.js";import{_ as re}from"./plugin-vueexport-helper-DlAUqK2U.js";const ne={class:"min-h-screen bg-slate-50 relative overflow-hidden font-sans selection:bg-rose-100"},ie={class:"relative z-10 max-w-6xl mx-auto px-6 py-12"},de={class:"flex flex-col items-center mb-10 text-center"},ue={class:"grid lg:grid-cols-12 gap-8"},ce={class:"lg:col-span-8 space-y-6"},pe={class:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 md:p-8 min-h-[500px] flex flex-col transition-all relative"},ve={key:0,class:"absolute inset-0 z-50 bg-white/80 backdrop-blur-sm rounded-3xl flex flex-col items-center justify-center"},me={class:"text-rose-600 font-medium animate-pulse"},xe={key:1,class:"flex-1 flex flex-col justify-center"},fe={key:2,class:"w-full h-full flex flex-col"},ge={class:"flex justify-between items-center mb-4"},be={class:"flex items-center gap-3"},he={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},we={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},ye={class:"text-sm font-mono text-slate-600"},_e={class:"relative flex-1 bg-rose-50/50 rounded-xl border border-rose-100 flex flex-col justify-center p-4 min-h-[200px]"},ke={class:"mt-4 flex items-center gap-2 px-2"},Fe={class:"mt-6 grid grid-cols-2 gap-4"},Ce={class:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-center"},$e={class:"text-lg font-mono font-bold text-slate-700"},Re={class:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-center"},je={class:"text-lg font-mono font-bold text-slate-700"},Pe={class:"lg:col-span-4 space-y-6"},Ve={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 sticky top-8"},ze={class:"space-y-6"},Le={class:"space-y-4"},Me={class:"flex justify-between mb-1"},Se={class:"text-xs font-mono bg-rose-50 text-rose-600 px-1.5 rounded"},Ae={class:"flex justify-between mb-1"},Be={class:"text-xs font-mono bg-rose-50 text-rose-600 px-1.5 rounded"},Ue={class:"grid grid-cols-3 gap-2"},De=["onClick"],Te={class:"pt-4 border-t border-slate-100"},Ne=["disabled"],Ge={key:0,class:"mt-4 p-3 bg-slate-900 rounded-xl overflow-hidden"},Oe={class:"h-24 overflow-y-auto text-[10px] font-mono text-green-400 space-y-1 scrollbar-thin"},Ee={__name:"AudioTrimmer",setup(Ie){const p=r(null),g=r(!1),f=r(""),b=r(!1),P=r(0),h=r(0),_=r(10),k=r(0),F=r(0),m=r(0),v=r(0),x=r("mp3"),M=r(null);let a=null,C=null;const w=new le,V=r(!1),n=r([]),N=async()=>{if(V.value)return!0;try{f.value="æ­£åœ¨åŠ è½½ FFmpeg å¼•æ“...",n.value.push("Loading FFmpeg core...");const o="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";return w.on("log",({message:t})=>{n.value.push(t)}),await w.load({coreURL:await T(`${o}/ffmpeg-core.js`,"text/javascript"),wasmURL:await T(`${o}/ffmpeg-core.wasm`,"application/wasm")}),V.value=!0,n.value.push("FFmpeg loaded successfully."),!0}catch(o){return console.error(o),n.value.push(`Error: ${o.message}`),alert("FFmpeg åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚"),!1}},G=o=>{a&&a.destroy(),a=se.create({container:M.value,waveColor:"#fda4af",progressColor:"#e11d48",cursorColor:"#881337",barWidth:2,barGap:1,barRadius:2,height:128,normalize:!0,minPxPerSec:_.value}),C=a.registerPlugin(oe.create());const t=URL.createObjectURL(o);a.load(t),a.on("ready",()=>{h.value=a.getDuration(),F.value=h.value;const l=h.value*.1,s=h.value*.9;C.addRegion({start:l,end:s,content:"è£å‰ªåŒºåŸŸ",color:"rgba(225, 29, 72, 0.2)",drag:!0,resize:!0}),S(l,s)}),a.on("timeupdate",l=>{P.value=l}),a.on("finish",()=>{b.value=!1}),C.on("region-updated",l=>{S(l.start,l.end)}),C.on("region-clicked",(l,s)=>{s.stopPropagation(),l.play(),b.value=!0})},S=(o,t)=>{k.value=o,F.value=t;const l=t-o;m.value>l/2&&(m.value=0),v.value>l/2&&(v.value=0)},O=o=>{o&&o[0]&&(p.value=o[0],Y(()=>{G(p.value)}))},E=()=>{a&&a.destroy(),p.value=null,b.value=!1,P.value=0,n.value=[]},I=()=>{a&&(a.playPause(),b.value=a.isPlaying())},W=()=>{a&&a.zoom(Number(_.value))},$=o=>{const t=Math.floor(o/60),l=Math.floor(o%60),s=Math.floor(o%1*10);return`${t}:${l.toString().padStart(2,"0")}.${s}`},H=async()=>{if(!p.value)return;if(g.value=!0,!await N()){g.value=!1;return}try{f.value="æ­£åœ¨è¯»å–æ–‡ä»¶...";const t=`input.${p.value.name.split(".").pop()}`,l=`output.${x.value}`;await w.writeFile(t,await ae(p.value)),f.value="æ­£åœ¨å¤„ç†éŸ³é¢‘...";const s=k.value,y=F.value-k.value,q=y-v.value,R=[];m.value>0&&R.push(`afade=t=in:st=0:d=${m.value}`),v.value>0&&R.push(`afade=t=out:st=${q}:d=${v.value}`);const c=[];c.push("-ss",s.toString()),c.push("-t",y.toString()),c.push("-i",t),R.length>0&&c.push("-af",R.join(",")),x.value==="mp3"?c.push("-c:a","libmp3lame","-q:a","2"):x.value==="m4a"&&c.push("-c:a","aac","-b:a","192k"),c.push(l),n.value.push(`Running: ffmpeg ${c.join(" ")}`),await w.exec(c),f.value="æ‰“åŒ…ä¸‹è½½ä¸­...";const J=await w.readFile(l);te.saveAs(new Blob([J.buffer],{type:`audio/${x.value}`}),`privacy_box_trim_${Date.now()}.${x.value}`),n.value.push("Done!")}catch(t){console.error(t),n.value.push(`Process Error: ${t.message}`),alert("å¤„ç†å‡ºé”™ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—")}finally{g.value=!1,f.value=""}};return K(()=>{a&&a.destroy()}),(o,t)=>{const l=Q("RouterLink");return u(),i("div",ne,[t[20]||(t[20]=e("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),t[21]||(t[21]=e("div",{class:"absolute top-0 right-[-10%] w-[500px] h-[500px] bg-rose-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),t[22]||(t[22]=e("div",{class:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-orange-200 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),e("div",ie,[e("div",de,[A(l,{to:"/",class:"text-sm font-medium text-slate-500 hover:text-rose-600 mb-4 inline-flex items-center gap-1 transition-colors"},{default:Z(()=>[...t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m15 18-6-6 6-6"})],-1),j(" è¿”å›é¦–é¡µ ",-1)])]),_:1}),t[4]||(t[4]=e("h1",{class:"text-3xl md:text-4xl font-extrabold text-slate-900 mb-3"},[e("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-rose-500 to-orange-500"},"éŸ³é¢‘æ³¢å½¢å‰ªè¾‘")],-1)),t[5]||(t[5]=e("p",{class:"text-slate-600 max-w-2xl"}," å¯è§†åŒ–è£å‰ª MP3/WAV/OGGã€‚æ”¯æŒæ³¢å½¢é¢„è§ˆã€ç²¾å‡†é€‰å–ã€æ·¡å…¥æ·¡å‡ºï¼Œæœ¬åœ°æ— æŸå¯¼å‡ºã€‚ ",-1))]),e("div",ue,[e("div",ce,[e("div",pe,[g.value?(u(),i("div",ve,[t[6]||(t[6]=e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-rose-200 border-t-rose-600 mb-4"},null,-1)),e("p",me,d(f.value),1)])):B("",!0),p.value?(u(),i("div",fe,[e("div",ge,[e("div",be,[e("button",{onClick:I,class:"w-12 h-12 rounded-full bg-rose-500 text-white flex items-center justify-center shadow-lg shadow-rose-500/30 hover:bg-rose-600 hover:scale-105 transition-all"},[b.value?(u(),i("svg",we,[...t[8]||(t[8]=[e("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)])])):(u(),i("svg",he,[...t[7]||(t[7]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])]))]),e("div",ye,d($(P.value))+" / "+d($(h.value)),1)]),e("button",{onClick:E,class:"text-sm text-slate-500 hover:text-rose-500 flex items-center gap-1 transition-colors px-3 py-2 rounded-lg hover:bg-rose-50"},[...t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1),j(" é‡é€‰æ–‡ä»¶ ",-1)])])]),e("div",_e,[e("div",{ref_key:"waveformRef",ref:M,class:"w-full"},null,512),e("div",ke,[t[10]||(t[10]=e("span",{class:"text-xs text-slate-400"},"â–",-1)),z(e("input",{type:"range",min:"10",max:"200","onUpdate:modelValue":t[0]||(t[0]=s=>_.value=s),onInput:W,class:"w-full h-1.5 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-rose-500"},null,544),[[L,_.value]]),t[11]||(t[11]=e("span",{class:"text-xs text-slate-400"},"â•",-1))])]),e("div",Fe,[e("div",Ce,[t[12]||(t[12]=e("div",{class:"text-xs text-slate-400 mb-1"}," å¼€å§‹æ—¶é—´ ",-1)),e("div",$e,d($(k.value)),1)]),e("div",Re,[t[13]||(t[13]=e("div",{class:"text-xs text-slate-400 mb-1"}," ç»“æŸæ—¶é—´ ",-1)),e("div",je,d($(F.value)),1)])])])):(u(),i("div",xe,[A(ee,{accept:"audio/*",hint:"æ”¯æŒ MP3, WAV, OGG, AAC, M4A",onFilesSelected:O})]))])]),e("div",Pe,[e("div",Ve,[t[18]||(t[18]=e("h2",{class:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2"},[e("span",{class:"w-1 h-6 bg-rose-500 rounded-full"}),j(" å‰ªè¾‘è®¾ç½® ")],-1)),e("div",ze,[e("div",Le,[e("div",null,[e("div",Me,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-slate-700"},"æ·¡å…¥æ—¶é•¿ (Fade In)",-1)),e("span",Se,d(m.value)+"s",1)]),z(e("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),min:"0",max:"5",step:"0.5",class:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-rose-500"},null,512),[[L,m.value,void 0,{number:!0}]])]),e("div",null,[e("div",Ae,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-slate-700"},"æ·¡å‡ºæ—¶é•¿ (Fade Out)",-1)),e("span",Be,d(v.value)+"s",1)]),z(e("input",{type:"range","onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),min:"0",max:"5",step:"0.5",class:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-rose-500"},null,512),[[L,v.value,void 0,{number:!0}]])])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"å¯¼å‡ºæ ¼å¼",-1)),e("div",Ue,[(u(),i(U,null,D(["mp3","wav","m4a"],s=>e("button",{key:s,onClick:y=>x.value=s,class:X(["px-2 py-2 rounded-lg text-sm font-medium border transition-all uppercase",x.value===s?"bg-rose-100 border-rose-500 text-rose-700":"bg-white border-slate-200 text-slate-600 hover:border-rose-300"])},d(s),11,De)),64))])]),e("div",Te,[e("button",{onClick:H,disabled:!p.value||g.value,class:"w-full py-3.5 bg-gradient-to-r from-rose-500 to-orange-500 text-white font-bold rounded-xl shadow-lg shadow-rose-500/30 hover:shadow-rose-500/50 transition-all transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none"},d(V.value?"å¯¼å‡ºå‰ªè¾‘éŸ³é¢‘":"åˆå§‹åŒ–å¹¶å¯¼å‡º"),9,Ne)])]),n.value.length>0?(u(),i("div",Ge,[t[17]||(t[17]=e("div",{class:"text-xs text-slate-400 font-mono mb-1 border-b border-slate-700 pb-1"}," ç³»ç»Ÿæ—¥å¿— ",-1)),e("div",Oe,[(u(!0),i(U,null,D(n.value,(s,y)=>(u(),i("div",{key:y}," > "+d(s),1))),128))])])):B("",!0)]),t[19]||(t[19]=e("div",{class:"bg-rose-50/80 backdrop-blur rounded-2xl p-5 border border-rose-100 text-sm text-rose-800 leading-relaxed"},[e("strong",null,"ğŸµ å‰ªè¾‘æŠ€å·§ï¼š"),e("br"),j(" æ‹–æ‹½æ³¢å½¢ä¸Šçš„çº¢è‰²é€‰åŒºæ¥è°ƒæ•´å¼€å§‹å’Œç»“æŸç‚¹ã€‚ä½¿ç”¨æ·¡å…¥æ·¡å‡ºå¯ä»¥è®©é“ƒå£°è¿‡æ¸¡æ›´è‡ªç„¶ã€‚æ‰€æœ‰å¤„ç†å‡åœ¨æœ¬åœ°æµè§ˆå™¨å®Œæˆï¼Œéšç§å®‰å…¨ã€‚ ")],-1))])])])])}}},Qe=re(Ee,[["__scopeId","data-v-04f0aa0c"]]);export{Qe as default};
