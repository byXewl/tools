(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8543],{58543:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return g}});var i=t(85893),l=t(67294),r=t(65400),o=t.n(r),n=t(11187),s=t(28276),c=t(57939),m=t.n(c);function d(e,a,t,i){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(e+a+t)/3*(i/255)+l*(1-i/255)}function g(e){let{category:a,toolName:t}=e,{t:r}=(0,s.$G)(),c="tools/".concat(a,"/").concat(t),[g,_]=(0,l.useState)(),[h,p]=(0,l.useState)(),[u,x]=(0,l.useState)(),C=(0,l.useRef)(),R=(0,l.useRef)(),f=(0,l.useRef)(),j=(e,a)=>{let t=e.target.files[0];if(t&&t.size<=5242880){let e=new FileReader;e.onloadend=()=>{a(e.result),x(null)},e.readAsDataURL(t)}else t&&t.size>5242880&&n.ZP.error(r("".concat(c,":fileSizeError")))};return(0,i.jsxs)("div",{children:[g?(0,i.jsx)("div",{className:m().imageWrap,children:(0,i.jsx)("img",{src:g,alt:"",style:{maxWidth:"100%"}})}):null,h?(0,i.jsx)("div",{className:m().imageWrap,children:(0,i.jsx)("img",{src:h,alt:"",style:{maxWidth:"100%"}})}):null,(0,i.jsxs)("div",{style:{display:"inline-block"},className:m().mr10+" "+m().calCls,children:[(0,i.jsxs)(o(),{type:"primary",className:m().inputBtn,children:[(0,i.jsx)("div",{className:m().inputTxt,children:g?r("".concat(c,":reUploadForeground")):r("".concat(c,":uploadForeground"))}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,_),ref:C})]}),(0,i.jsxs)(o(),{type:"primary",className:m().inputBtn,children:[(0,i.jsx)("div",{className:m().inputTxt,children:h?r("".concat(c,":reUploadBackground")):r("".concat(c,":uploadBackground"))}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,p),ref:R})]}),(0,i.jsx)(o(),{className:m().flipBtn+" "+m().mr10,type:"primary",onClick:()=>{_(h),p(g),x(null)},children:r("".concat(c,":exChange"))}),(0,i.jsx)(o(),{className:m().flipBtn+" "+m().mr10,type:"primary",onClick:()=>{let e=new Image;e.src=g,e.onload=()=>{let a=new Image;a.src=h,a.onload=()=>{let t=Math.max(e.width,a.width),i=Math.max(e.height,a.height),l=f.current,r=l.getContext("2d");r.clearRect(0,0,l.width,l.height),l.width=t,l.height=i;let o=Math.min(t/e.width,i/e.height),n=Math.min(t/a.width,i/a.height),s=e.width*o,c=e.height*o,m=a.width*n,g=a.height*n;r.drawImage(e,(t-s)/2,(i-c)/2,s,c);let _=r.getImageData(0,0,t,i);r.drawImage(a,(t-m)/2,(i-g)/2,m,g);let h=r.getImageData(0,0,t,i);for(let e=0;e<i;e++)for(let a=0;a<t;a++){let i=(t*e+a)*4,[l,r,o,n]=[i,i+1,i+2,i+3],s=d(_.data[l],_.data[r],_.data[o],_.data[n],255),c=d(h.data[l],h.data[r],h.data[o],h.data[n]),m=Math.round((c=c/255*.5)/(.5-(s=s/255*.5)+c)*255),g=Math.round((.5-s+c)*255);_.data[l]=_.data[r]=_.data[o]=m,_.data[n]=g}r.putImageData(_,0,0),x(l.toDataURL("image/png"))}}},children:r("".concat(c,":mergeImages"))})]}),(0,i.jsx)("canvas",{ref:f,style:{display:"none"}}),u&&(0,i.jsxs)(l.Fragment,{children:[(0,i.jsxs)("div",{className:m().tipTitle,children:[" ",r("".concat(c,":whiteBg"))]}),(0,i.jsx)("div",{className:m().imageWrap,children:(0,i.jsx)("img",{src:u,className:m().resultImage})})]}),u&&(0,i.jsxs)(l.Fragment,{children:[(0,i.jsxs)("div",{className:m().tipTitle,children:[" ",r("".concat(c,":blackBg"))]}),(0,i.jsx)("div",{className:m().imageWrap+" "+m().bgBlack,children:(0,i.jsx)("img",{src:u,className:m().resultImage})})]}),u&&(0,i.jsx)(o(),{className:m().downloadBtn,type:"primary",onClick:()=>{let e=document.createElement("a");e.href=u,e.download="merged_image.png",e.click()},children:r("download")}),(0,i.jsxs)("div",{className:m().intro,children:[(0,i.jsx)("div",{className:m().title,children:r("introTitle")}),r("".concat(c,":intro")),(0,i.jsx)("div",{className:m().title,children:r("privacy")}),r("privacyTextImage")]})]})}},57939:function(e){e.exports={colorCard:"imageColorRate_colorCard__PrBEn",info:"imageColorRate_info__pQNxP",mainColorCard:"imageColorRate_mainColorCard__RLhDd",colorDiv:"imageColorRate_colorDiv__dgtR3",inputBtn:"imageColorRate_inputBtn__Vu_Ef",imageWrap:"imageColorRate_imageWrap__vD1SE",imgBg:"imageColorRate_imgBg__Id_0K",bgBlack:"imageColorRate_bgBlack__4B_R2",intro:"imageColorRate_intro__AC_F6",title:"imageColorRate_title__muxcd",mr10:"imageColorRate_mr10__IYSHx",ml4:"imageColorRate_ml4__WqUI8",calCls:"imageColorRate_calCls__6MSa1",lineFormWrap:"imageColorRate_lineFormWrap__grcid",slider:"imageColorRate_slider__zD4kg",tipTitle:"imageColorRate_tipTitle__xxzGZ",copyBtn:"imageColorRate_copyBtn__YUuoy",textArea:"imageColorRate_textArea__3mH9w",resItem:"imageColorRate_resItem__ZVZVo",sizes:"imageColorRate_sizes__m8Dtz"}}}]);